{"name":"Google Places API Gateway","tagline":"A simple Java API management gateway for the Google Place Search API.","body":"# Google Places API Gateway\r\n\r\nA simple Java API management gateway for the Google Place Search API.  The gateway writes all requests and response to a database and allows users to query this database to analyze gateway usage.  The gateway also supports user authentication to only allow access to registered users and to track user activity on the gateway.\r\n\r\nDocumenatation for the Google Place Search API can be found at https://developers.google.com/places/documentation/search\r\n\r\n## Installation and Setup\r\n\r\nTo run the gateway simply pull the source code from this repostory.  Open the Java project and run the file `Gateway.java`.  The default configuration listens on port 8080 and writes searches and results to a local SQLite database.  The port number can be changed in the source code.  The database connection information can be changed in the `gateway.properties` file, which is read by the gateway on startup.\r\n\r\n###Database Configuration\r\n\r\nThe connection database requires three tables\r\n\r\n * `searches` - Contains searches\r\n * `results` - Contains the results of searches\r\n * `users` - Contains users authentication information\r\n\r\n### Searches table\r\n\r\nThe following command creates a correctly formatted `searches` table on an SQLite database\r\n\r\n```\r\nCREATE TABLE searches (\r\nid serial primary key,\r\nsessionid uuid not null,\r\ntimestamp timestamp not null,\r\nsearchtype text,\r\nuser text,\r\nquery text,\r\nkey text,\r\nlocation text,\r\nradius text,\r\nkeyword text,\r\nlanguage text,\r\nminprice text,\r\nmaxprice text,\r\nname text,\r\nopennow text,\r\nrankby text,\r\ntypes text,\r\npagetoken text,\r\nzagatselected text);\r\n```\r\n\r\n### Results table\r\n\r\nThe following command creates a correctly formatted `results` table on an SQLite database\r\n\r\n```\r\nCREATE TABLE results (\r\nid serial primary key,\r\nsessionid uuid not null,\r\ntimestamp timestamp not null,\r\nuser text,\r\nplaceid text,\r\nlat real,\r\nlng real);\r\n```\r\n\r\n### Users table\r\n\r\nThe following command creates a correctly formatted `users` table on an SQLite database\r\n\r\n```\r\nCREATE TABLE users (\r\nid serial primary key,\r\nsessionid uuid not null,\r\nusername text not null,\r\nsalt text not null,\r\npasshash text not null);\r\n```\r\n\r\n## Search Requests\r\n\r\nSearch request allow for using the Google Place Search API to search for places based on a number of parameters.  The Google Place Search API consists of three types of searches\r\n\r\n * Nearby Search\r\n * Text Search\r\n * Radar Search\r\n\r\nA gateway place search request is a HTTP request of the following form\r\n\r\n```\r\nhttp://<hostname>:<port>/google-places-api-gateway/<searchtype>?<parameters>\r\n```\r\n\r\n`hostname` is the hostname of the gateway.\r\n\r\n`port` is the port the gateway is listening on.\r\n\r\n`seachtype` is one of the following values\r\n\r\n * `nearbysearch` - Indicates a Nearby Search request using the Google Plcae Search API.\r\n * `textsearch` - Indicates a Text Search request using the Google Plcae Search API.\r\n * `nearbysearch` - Indicates a Radar Search request using the Google Plcae Search API.\r\n\r\n`parameters` are the parameters for the search.  For each search type, the gateway requires all required parameters and supports all optional parameters detailed in the [Google Place Search API documentation](https://developers.google.com/places/documentation/search).  In addition the gateway also supports the following optional parameters\r\n\r\n * `username` - A username to authenticate the user and allow access to the gateway.  If you specifiy a `username` parameter, you must also specifiy a `password` parameter.\r\n * `password` - A password to authenticate the user and allow access to the gateway.  If you specifiy a `password` parameter, you must also specifiy a `username` parameter.\r\n\r\n## Query Requests\r\n\r\nQuery requests allow for querying the database of past searches and results.  There are two types of gateway queries\r\n\r\n * Search Query - A query on the search requests handled by the gateway.\r\n * Result Query - A query on the search results returned by the gateway.\r\n\r\n### Search Query\r\n\r\nA gateway search query request is a HTTP request of the following form\r\n\r\n```\r\nhttp://<hostname>:<port>/google-places-api-gateway/searchquery?<parameters>\r\n```\r\n\r\n`hostname` is the hostname of the gateway.\r\n\r\n`port` is the port the gateway is listening on.\r\n\r\n`parameters` are the parameters for the query.  For any specified parameter, the query will only return records with values equal to that parameter.  A Search Query supports all required and optional search parameters for any type of search detailed in the [Google Place Search API documentation](https://developers.google.com/places/documentation/search).  In addition the gateway also supports the following Search Query parameters\r\n\r\n * `sessionid` - A universally unique identifier (UUID) used to identify a single session consisting of a search and a collection of results\r\n * `user` - The username of the user who made the search request.  This value will be `null` for anonymous requests.\r\n * `searchtype` - The type of search.  Valid values include `nearby`, `text', and 'radar'.\r\n\r\n### Result Query\r\n\r\nA gateway result query request is a HTTP request of the following form\r\n\r\n```\r\nhttp://<hostname>:<port>/google-places-api-gateway/resultquery?<parameters>\r\n```\r\n\r\n`hostname` is the hostname of the gateway.\r\n\r\n`port` is the port the gateway is listening on.\r\n\r\n`parameters` are the parameters for the query.  For any specified parameter, the query will only return records with values equal to that parameter.  The gateway supports the following Result Query parameters\r\n\r\n * `sessionid` - A universally unique identifier (UUID) used to identify a single session consisting of a search and a collection of results\r\n * `user` - The username of the user who made the search request.  This value will be `null` for anonymous requests.\r\n * `placeid` - A unique identifier for a place.\r\n * `lat` - The latitude of a result.\r\n * `lng` - The longitude of a result.\r\n\r\n## User Requests\r\n\r\nThe gateway supports user authentication to only allow access to registered users.  The gateway can be configured to allow or deny requests from users who do not provide credentials in their request.  User request allow for new users to be added to the database.\r\n\r\nA gateway Add User request is a HTTP request of the following form\r\n\r\n```\r\nhttp://<hostname>:<port>/google-places-api-gateway/adduser?newusername=<username>&newpassword=<password>\r\n```\r\n\r\n`hostname` is the hostname of the gateway.\r\n\r\n`port` is the port the gateway is listening on.\r\n\r\n`username` is the username of the user to be added\r\n\r\n`password` is the password of the user to be added\r\n\r\nThe gateway will return an error response if the new username already exists in the database.\r\n\r\n## Output\r\n\r\nAll output is returned in JavaScript Object Notation (JSON).  All repsonses have the following fields\r\n\r\n * `results` - An array of results of a search or query request.  For users request this field will be an empty array.\r\n * `status` - The status of the request.  See Status Codes below for more information.\r\n * `error_message` - A more detailed error message.\r\n\r\nThe output for search requests is simply forwarded repsonse from the Google Place Search API.  The output is identical to the output detailed in the [Google Place Search API documentation](https://developers.google.com/places/documentation/search#PlaceSearchResponses).\r\n\r\nThe output for query requests contains the results of the query are placed in the `results` field.  The `status` field indiciates whether the query was successul.\r\n\r\nThe output for query requests contains an empty `results` field.  The `status` field indiciates whether the request was successful.\r\n\r\n### Status Codes\r\n\r\nThe output for search requests contains status codes detailed in the [Google Place Search API documentation](https://developers.google.com/places/documentation/search##PlaceSearchStatusCodes).  In addition the gateway may also output the following status codes\r\n\r\n * `OK` - Indicates that no errors occured.\r\n * `GATEWAY_INVALID_REQUEST` - Indicates that the gateway could not read the HTTP request.  Ensure that your HTTP request is being sent properly.\r\n * `GATEWAY_INVALID_URL` - Indicates that the gateway does support the path provided in the URL.  Ensure that your request URL matches one of the above formats.\r\n * `GATEWAY_AUTHENTICATION_FAILED` - Indicates that user authentication failed.  Ensure that you are prividing valid credendtials have registered with the gateway.\r\n * `GATEWAY_SEARCH_ERROR` - Indicates that an error occured while performing a search request.  Ensure that your request includes all required parameters and only contains supported parameters.\r\n * `GATEWAY_QUERY_ERROR` - Indicates that an error occured while performing a query request.  Ensure that your request only contains supported parameters.\r\n * `GATEWAY_ADD_USER_ERROR` - Indicates that an error occured while attempting to register a new user.  This is often because the request username is already taken.  Try submitting another request with a different username.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}